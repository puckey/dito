"use strict";

exports.__esModule = true;
exports.default = void 0;
const SYMBOL_ALLOWED = Symbol('allowed');

class Result {
  constructor(router, method, path, tree) {
    this.status = {
      GET: 404,
      get: 404,
      options: 200,
      OPTIONS: 200
    }[method] || (tree ? 405 : 501);

    this[SYMBOL_ALLOWED] = () => tree ? router.getAllowedMethods(path, method) : router.getAllowedMethods();
  }

  get allowed() {
    const allowed = this[SYMBOL_ALLOWED]();
    Object.defineProperty(this, 'allowed', {
      value: allowed,
      configurable: true
    });
    return allowed;
  }

}

exports.default = Result;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9SZXN1bHQuanMiXSwibmFtZXMiOlsiU1lNQk9MX0FMTE9XRUQiLCJTeW1ib2wiLCJSZXN1bHQiLCJjb25zdHJ1Y3RvciIsInJvdXRlciIsIm1ldGhvZCIsInBhdGgiLCJ0cmVlIiwic3RhdHVzIiwiR0VUIiwiZ2V0Iiwib3B0aW9ucyIsIk9QVElPTlMiLCJnZXRBbGxvd2VkTWV0aG9kcyIsImFsbG93ZWQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiY29uZmlndXJhYmxlIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTUEsY0FBYyxHQUFHQyxNQUFNLENBQUMsU0FBRCxDQUE3Qjs7QUFFZSxNQUFNQyxNQUFOLENBQWE7QUFDMUJDLEVBQUFBLFdBQVcsQ0FBQ0MsTUFBRCxFQUFTQyxNQUFULEVBQWlCQyxJQUFqQixFQUF1QkMsSUFBdkIsRUFBNkI7QUFJdEMsU0FBS0MsTUFBTCxHQUFjO0FBQ1pDLE1BQUFBLEdBQUcsRUFBRSxHQURPO0FBRVpDLE1BQUFBLEdBQUcsRUFBRSxHQUZPO0FBR1pDLE1BQUFBLE9BQU8sRUFBRSxHQUhHO0FBSVpDLE1BQUFBLE9BQU8sRUFBRTtBQUpHLE1BS1pQLE1BTFksTUFLQUUsSUFBSSxHQUFHLEdBQUgsR0FBUyxHQUxiLENBQWQ7O0FBT0EsU0FBS1AsY0FBTCxJQUF1QixNQUFNTyxJQUFJLEdBQzdCSCxNQUFNLENBQUNTLGlCQUFQLENBQXlCUCxJQUF6QixFQUErQkQsTUFBL0IsQ0FENkIsR0FFN0JELE1BQU0sQ0FBQ1MsaUJBQVAsRUFGSjtBQUdEOztBQUVVLE1BQVBDLE9BQU8sR0FBRztBQUNaLFVBQU1BLE9BQU8sR0FBRyxLQUFLZCxjQUFMLEdBQWhCO0FBRUFlLElBQUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQixJQUF0QixFQUE0QixTQUE1QixFQUF1QztBQUNyQ0MsTUFBQUEsS0FBSyxFQUFFSCxPQUQ4QjtBQUVyQ0ksTUFBQUEsWUFBWSxFQUFFO0FBRnVCLEtBQXZDO0FBSUEsV0FBT0osT0FBUDtBQUNEOztBQXpCeUIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTWU1CT0xfQUxMT1dFRCA9IFN5bWJvbCgnYWxsb3dlZCcpXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc3VsdCB7XG4gIGNvbnN0cnVjdG9yKHJvdXRlciwgbWV0aG9kLCBwYXRoLCB0cmVlKSB7XG4gICAgLy8gU2VuZCA0MDUgLyA1MDEgZXJyb3JzLCBleGNlcHQgZm9yICdHRVQnICg0MDQpIGFuZCAnT1BUSU9OUycgKDIwMCkuXG4gICAgLy8gNDA1OiAnTWV0aG9kIE5vdCBBbGxvd2VkJyAodHJlZSB3YXMgZm91bmQsIGJ1dCBub2RlIHdhcyBub3QpXG4gICAgLy8gNTAxOiAnTWV0aG9kIE5vdCBJbXBsZW1lbnRlZCcgKHRoZXJlIGlzIG5vIHRyZWUgZm9yIHRoYXQgbWV0aG9kKVxuICAgIHRoaXMuc3RhdHVzID0ge1xuICAgICAgR0VUOiA0MDQsXG4gICAgICBnZXQ6IDQwNCxcbiAgICAgIG9wdGlvbnM6IDIwMCxcbiAgICAgIE9QVElPTlM6IDIwMFxuICAgIH1bbWV0aG9kXSB8fCAodHJlZSA/IDQwNSA6IDUwMSlcbiAgICAvLyBHZXR0ZXIgZm9yIHRoZSBgYWxsb3dlZGAgcHJvcGVydHksIGNhbGxlZCBvbmNlLCB0aGVuIGNhY2hlZDpcbiAgICB0aGlzW1NZTUJPTF9BTExPV0VEXSA9ICgpID0+IHRyZWVcbiAgICAgID8gcm91dGVyLmdldEFsbG93ZWRNZXRob2RzKHBhdGgsIG1ldGhvZClcbiAgICAgIDogcm91dGVyLmdldEFsbG93ZWRNZXRob2RzKClcbiAgfVxuXG4gIGdldCBhbGxvd2VkKCkge1xuICAgIGNvbnN0IGFsbG93ZWQgPSB0aGlzW1NZTUJPTF9BTExPV0VEXSgpXG4gICAgLy8gUmVkZWZpbmUgYGFsbG93ZWRgIHByb3BlcnR5IHdpdGggY29tcHV0ZWQgdmFsdWUuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdhbGxvd2VkJywge1xuICAgICAgdmFsdWU6IGFsbG93ZWQsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KVxuICAgIHJldHVybiBhbGxvd2VkXG4gIH1cbn1cbiJdfQ==