"use strict";

exports.__esModule = true;
exports.findRoute = findRoute;

function findRoute(router) {
  return (ctx, next) => {
    const result = router.find(ctx.method, ctx.path);
    const route = result.handler ? { ...result.handler
    } : result;
    ctx.route = route;
    ctx.params = result.params || {};
    const {
      controller,
      action
    } = route;

    if (controller) {
      ctx.controller = controller;
    }

    if (action) {
      ctx.action = action;
    }

    return next();
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taWRkbGV3YXJlL2ZpbmRSb3V0ZS5qcyJdLCJuYW1lcyI6WyJmaW5kUm91dGUiLCJyb3V0ZXIiLCJjdHgiLCJuZXh0IiwicmVzdWx0IiwiZmluZCIsIm1ldGhvZCIsInBhdGgiLCJyb3V0ZSIsImhhbmRsZXIiLCJwYXJhbXMiLCJjb250cm9sbGVyIiwiYWN0aW9uIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFPLFNBQVNBLFNBQVQsQ0FBbUJDLE1BQW5CLEVBQTJCO0FBQ2hDLFNBQU8sQ0FBQ0MsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDcEIsVUFBTUMsTUFBTSxHQUFHSCxNQUFNLENBQUNJLElBQVAsQ0FBWUgsR0FBRyxDQUFDSSxNQUFoQixFQUF3QkosR0FBRyxDQUFDSyxJQUE1QixDQUFmO0FBR0EsVUFBTUMsS0FBSyxHQUFHSixNQUFNLENBQUNLLE9BQVAsR0FBaUIsRUFBRSxHQUFHTCxNQUFNLENBQUNLO0FBQVosS0FBakIsR0FBeUNMLE1BQXZEO0FBQ0FGLElBQUFBLEdBQUcsQ0FBQ00sS0FBSixHQUFZQSxLQUFaO0FBRUFOLElBQUFBLEdBQUcsQ0FBQ1EsTUFBSixHQUFhTixNQUFNLENBQUNNLE1BQVAsSUFBaUIsRUFBOUI7QUFDQSxVQUFNO0FBQUVDLE1BQUFBLFVBQUY7QUFBY0MsTUFBQUE7QUFBZCxRQUF5QkosS0FBL0I7O0FBQ0EsUUFBSUcsVUFBSixFQUFnQjtBQUNkVCxNQUFBQSxHQUFHLENBQUNTLFVBQUosR0FBaUJBLFVBQWpCO0FBQ0Q7O0FBQ0QsUUFBSUMsTUFBSixFQUFZO0FBQ1ZWLE1BQUFBLEdBQUcsQ0FBQ1UsTUFBSixHQUFhQSxNQUFiO0FBQ0Q7O0FBQ0QsV0FBT1QsSUFBSSxFQUFYO0FBQ0QsR0FoQkQ7QUFpQkQiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZmluZFJvdXRlKHJvdXRlcikge1xuICByZXR1cm4gKGN0eCwgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHJvdXRlci5maW5kKGN0eC5tZXRob2QsIGN0eC5wYXRoKVxuICAgIC8vIFdlIHVzZSBgcmVzdWx0LmhhbmRsZXJgIHRvIHN0b3JlIHRoZSByb3V0ZSBvYmplY3QgZm9yIG1hdGNoZWQgcm91dGVzLlxuICAgIC8vIElmIG5vbmUgaXMgZm91bmQsIHNldCBgY3R4LnJvdXRlID0gcmVzdWx0YCwgZm9yICBgeyBzdGF0dXMsIGFsbG93ZWQgfWAuXG4gICAgY29uc3Qgcm91dGUgPSByZXN1bHQuaGFuZGxlciA/IHsgLi4ucmVzdWx0LmhhbmRsZXIgfSA6IHJlc3VsdFxuICAgIGN0eC5yb3V0ZSA9IHJvdXRlXG4gICAgLy8gTk9URTogVGhlIG5hbWUgZm9yIGBjdHgucGFyYW1zYCB3YXMgaW5oZXJpdGVkIGZyb20gYGtvYS1yb3V0ZXJgXG4gICAgY3R4LnBhcmFtcyA9IHJlc3VsdC5wYXJhbXMgfHwge31cbiAgICBjb25zdCB7IGNvbnRyb2xsZXIsIGFjdGlvbiB9ID0gcm91dGVcbiAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgY3R4LmNvbnRyb2xsZXIgPSBjb250cm9sbGVyXG4gICAgfVxuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIGN0eC5hY3Rpb24gPSBhY3Rpb25cbiAgICB9XG4gICAgcmV0dXJuIG5leHQoKVxuICB9XG59XG4iXX0=