"use strict";

exports.__esModule = true;
exports.clone = clone;

require("core-js/modules/es.object.get-prototype-of.js");

require("core-js/modules/es.object.keys.js");

var _base = require("../base");

var _ = require("./");

function clone(arg, callback) {
  if (callback === void 0) {
    callback = null;
  }

  var copy;

  if ((0, _base.isDate)(arg)) {
    copy = new arg.constructor(+arg);
  } else if ((0, _base.isRegExp)(arg)) {
    copy = new arg.constructor(arg);
  } else if ((0, _base.isArray)(arg)) {
    copy = new arg.constructor(arg.length);

    for (var i = 0, l = arg.length; i < l; i++) {
      copy[i] = clone(arg[i], callback);
    }
  } else if ((0, _base.isObject)(arg)) {
    if ((0, _base.isFunction)(arg.clone)) {
      copy = arg.clone();
    } else {
      copy = Object.create(Object.getPrototypeOf(arg));

      for (var _i = 0, _Object$keys = Object.keys(arg); _i < _Object$keys.length; _i++) {
        var key = _Object$keys[_i];
        copy[key] = clone(arg[key], callback);
      }
    }
  } else {
    copy = arg;
  }

  return (0, _.pick)(callback == null ? void 0 : callback(copy), copy);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vYmplY3QvY2xvbmUuanMiXSwibmFtZXMiOlsiY2xvbmUiLCJhcmciLCJjYWxsYmFjayIsImNvcHkiLCJjb25zdHJ1Y3RvciIsImxlbmd0aCIsImkiLCJsIiwiT2JqZWN0IiwiY3JlYXRlIiwiZ2V0UHJvdG90eXBlT2YiLCJrZXlzIiwia2V5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFTyxTQUFTQSxLQUFULENBQWVDLEdBQWYsRUFBb0JDLFFBQXBCLEVBQXFDO0FBQUEsTUFBakJBLFFBQWlCO0FBQWpCQSxJQUFBQSxRQUFpQixHQUFOLElBQU07QUFBQTs7QUFDMUMsTUFBSUMsSUFBSjs7QUFDQSxNQUFJLGtCQUFPRixHQUFQLENBQUosRUFBaUI7QUFDZkUsSUFBQUEsSUFBSSxHQUFHLElBQUlGLEdBQUcsQ0FBQ0csV0FBUixDQUFvQixDQUFDSCxHQUFyQixDQUFQO0FBQ0QsR0FGRCxNQUVPLElBQUksb0JBQVNBLEdBQVQsQ0FBSixFQUFtQjtBQUN4QkUsSUFBQUEsSUFBSSxHQUFHLElBQUlGLEdBQUcsQ0FBQ0csV0FBUixDQUFvQkgsR0FBcEIsQ0FBUDtBQUNELEdBRk0sTUFFQSxJQUFJLG1CQUFRQSxHQUFSLENBQUosRUFBa0I7QUFDdkJFLElBQUFBLElBQUksR0FBRyxJQUFJRixHQUFHLENBQUNHLFdBQVIsQ0FBb0JILEdBQUcsQ0FBQ0ksTUFBeEIsQ0FBUDs7QUFDQSxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR04sR0FBRyxDQUFDSSxNQUF4QixFQUFnQ0MsQ0FBQyxHQUFHQyxDQUFwQyxFQUF1Q0QsQ0FBQyxFQUF4QyxFQUE0QztBQUMxQ0gsTUFBQUEsSUFBSSxDQUFDRyxDQUFELENBQUosR0FBVU4sS0FBSyxDQUFDQyxHQUFHLENBQUNLLENBQUQsQ0FBSixFQUFTSixRQUFULENBQWY7QUFDRDtBQUNGLEdBTE0sTUFLQSxJQUFJLG9CQUFTRCxHQUFULENBQUosRUFBbUI7QUFFeEIsUUFBSSxzQkFBV0EsR0FBRyxDQUFDRCxLQUFmLENBQUosRUFBMkI7QUFDekJHLE1BQUFBLElBQUksR0FBR0YsR0FBRyxDQUFDRCxLQUFKLEVBQVA7QUFDRCxLQUZELE1BRU87QUFHTEcsTUFBQUEsSUFBSSxHQUFHSyxNQUFNLENBQUNDLE1BQVAsQ0FBY0QsTUFBTSxDQUFDRSxjQUFQLENBQXNCVCxHQUF0QixDQUFkLENBQVA7O0FBQ0Esc0NBQWtCTyxNQUFNLENBQUNHLElBQVAsQ0FBWVYsR0FBWixDQUFsQixrQ0FBb0M7QUFBL0IsWUFBTVcsR0FBRyxtQkFBVDtBQUNIVCxRQUFBQSxJQUFJLENBQUNTLEdBQUQsQ0FBSixHQUFZWixLQUFLLENBQUNDLEdBQUcsQ0FBQ1csR0FBRCxDQUFKLEVBQVdWLFFBQVgsQ0FBakI7QUFDRDtBQUNGO0FBQ0YsR0FaTSxNQVlBO0FBQ0xDLElBQUFBLElBQUksR0FBR0YsR0FBUDtBQUNEOztBQUNELFNBQU8sWUFBS0MsUUFBTCxvQkFBS0EsUUFBUSxDQUFHQyxJQUFILENBQWIsRUFBdUJBLElBQXZCLENBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzQXJyYXksIGlzT2JqZWN0LCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Z1bmN0aW9uIH0gZnJvbSAnQC9iYXNlJ1xuaW1wb3J0IHsgcGljayB9IGZyb20gJ0Avb2JqZWN0J1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYXJnLCBjYWxsYmFjayA9IG51bGwpIHtcbiAgbGV0IGNvcHlcbiAgaWYgKGlzRGF0ZShhcmcpKSB7XG4gICAgY29weSA9IG5ldyBhcmcuY29uc3RydWN0b3IoK2FyZylcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChhcmcpKSB7XG4gICAgY29weSA9IG5ldyBhcmcuY29uc3RydWN0b3IoYXJnKVxuICB9IGVsc2UgaWYgKGlzQXJyYXkoYXJnKSkge1xuICAgIGNvcHkgPSBuZXcgYXJnLmNvbnN0cnVjdG9yKGFyZy5sZW5ndGgpXG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhcmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBjb3B5W2ldID0gY2xvbmUoYXJnW2ldLCBjYWxsYmFjaylcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoYXJnKSkge1xuICAgIC8vIFJlbHkgb24gYXJnLmNsb25lKCkgaWYgaXQgZXhpc3RzIGFuZCBhc3N1bWUgaXQgY3JlYXRlcyBhbiBhY3R1YWwgY2xvbmUuXG4gICAgaWYgKGlzRnVuY3Rpb24oYXJnLmNsb25lKSkge1xuICAgICAgY29weSA9IGFyZy5jbG9uZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFByZXZlbnQgY2FsbGluZyB0aGUgYWN0dWFsIGNvbnN0cnVjdG9yIHNpbmNlIGl0IGlzIG5vdCBndWFyYW50ZWVkIHRvXG4gICAgICAvLyB3b3JrIGFzIGludGVuZGVkIGhlcmUsIGFuZCBvbmx5IGNsb25lIHRoZSBub24taW5oZXJpdGVkIG93biBwcm9wZXJ0aWVzLlxuICAgICAgY29weSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKGFyZykpXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhhcmcpKSB7XG4gICAgICAgIGNvcHlba2V5XSA9IGNsb25lKGFyZ1trZXldLCBjYWxsYmFjaylcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29weSA9IGFyZ1xuICB9XG4gIHJldHVybiBwaWNrKGNhbGxiYWNrPy4oY29weSksIGNvcHkpXG59XG4iXX0=